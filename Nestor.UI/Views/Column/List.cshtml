@model Nestor.UI.Models.GeneralColumnModel

@{
    ViewBag.Title = Model.Column.Title;
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section styles {
    <style type="text/css">
        .table-scrollable {
            border:none;
        }
        .table > thead > tr > th, .table > tbody > tr > th, .table > tfoot > tr > th, .table > thead > tr > td, .table > tbody > tr > td, .table > tfoot > tr > td {
            border-top: none;
        }
    </style>
}

@section pagehead {
    <div class="page-head">
        <div class="container">
            <!-- BEGIN PAGE TITLE -->
            <div class="page-title">
                <h1><span class="fa fa-tree theme-font" style="font-size:24px;"></span> @Model.Column.Title <small>@Model.Column.Remark</small></h1>
            </div>
            <!-- END PAGE TITLE -->
        </div>
    </div>
}

@section breadcrumb {
    <ul class="page-breadcrumb breadcrumb">
        <li>
            <i class="fa fa-home" style="font-size: 14px;"></i><a href="@Url.Action("Index", "Home")">主页</a>
            <i class="fa fa-circle"></i>
        </li>
        @if (Model.Parent != null)
        {
            <li>
                <a href="/Column/@Model.Parent.Id">@Model.Parent.Title</a>
                <i class="fa fa-circle"></i>
            </li>
        }
        <li class="active">
            @Model.Column.Title
        </li>
    </ul>
}

<div class="row">
    <div class="col-md-12">
        <div class="portlet light bordered">
            <div class="portlet-body">
                <div class="row">
                    <div class="col-md-8">
                        <table class="table table-hover table-article" id="article-table">
                            <thead>
                                <tr>
                                    <th style="font-size:18px;">
                                        <i class="fa fa-bars" style="font-size:16px;"></i>&nbsp; @Model.Column.Title
                                    </th>
                                    <th style="width:40px;">&nbsp;</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model.Articles)
                                {
                                    <tr>
                                        <td>
                                            <span class="fa fa-angle-double-right"></span> <a href="@Url.Action("Index", new { controller = "Article", id = item.Id })">@item.Title</a>
                                        </td>
                                        <td class="text-right">
                                            @item.PublishDate.ToDateString()
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>

                    <div class="col-md-4 blog-sidebar">
                        @if (Model.Column.IsAuth)
                        {
                            @Html.Action("Info", "Account")
                        }

                        @if (Model.Sibling.Count != 0)
                        {                            
                            var cindex = 1;
                            <div class="side-content">
                                <div id="sibling-column">
                                    <h3 class="block blue-light"><i class="fa fa-ticket" style="font-size:20px;"></i>&nbsp;@Model.Parent.Title</h3>
                                    <hr />
                                    <ul class="nav nav-pills nav-stacked">
                                        @foreach (var item in Model.Sibling)
                                        {
                                            <li @(item.Id == Model.Column.Id ? "class=active" : "")>
                                                <a href="/Column/@item.Id">
                                                    <span class="badge badge-success"> @(cindex++) </span> @item.Title
                                                </a>
                                            </li>
                                        }
                                    </ul>
                                </div>

                                
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section scripts {
    @if (Model.Parent != null)
    {
        <script type="text/javascript">
            $(function () {
                nestor.topNavActive('@Model.Parent.Id');               
            });
        </script>
    }

    <script type="text/javascript">
        $(function () {
            nestor.topNavActive('@Model.Column.Id');
            nestor.initFrontTable($('#article-table'));
        });
    </script>
}

